<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <title>Coș de cumpărături</title>
    <link rel="stylesheet" href="styles.css">
    <script src="cart.js" defer></script>
</head>
<body>

    <div class="navbar">
        <ul class="navbar-links">
            <li><a href="1.html">Îmbrăcăminte</a></li>
            <li><a href="2.html">Încălțăminte</a></li>
            <li><a href="3.html">Cupoane & Oferte</a></li>
        </ul>
        <div class="navbar-right">
            <a href="cart.html" class="cart-button">Coș</a>
        </div>
    </div>

    <div class="cart-container">
        <h1>Coșul tău de cumpărături</h1>
        <div id="cart-items"></div>
        <p id="total-price"></p>
        <button id="checkout-button" onclick="window.location.href='index.html'">Finalizează Comanda</button>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const cart = JSON.parse(localStorage.getItem("cart")) || [];
            const cartItemsContainer = document.getElementById("cart-items");
            const totalPriceElement = document.getElementById("total-price");

            if (cart.length > 0) {
                cart.forEach((item, index) => {
                    const itemElement = document.createElement("div");
                    itemElement.classList.add("cart-item");
                    itemElement.innerHTML = `
                        <img src="${item.image}" alt="${item.name}" class="cart-item-image">
                        <div class="cart-item-details">
                            <h3>${item.name}</h3>
                            <p>Preț: ${item.price} RON</p>
                            <button class="remove-from-cart-button" data-index="${index}">Elimină din coș</button>
                        </div>
                    `;
                    cartItemsContainer.appendChild(itemElement);
                });

                const removeButtons = document.querySelectorAll(".remove-from-cart-button");
                removeButtons.forEach(button => {
                    button.addEventListener("click", function () {
                        const index = this.getAttribute("data-index");
                        cart.splice(index, 1);
                        localStorage.setItem("cart", JSON.stringify(cart));
                        location.reload();
                    });
                });

                
                let total = 0;
                cart.forEach(item => {
                    total += item.price;
                });
                totalPriceElement.innerText = `Total: ${total} RON`;

            } else {
                cartItemsContainer.innerHTML = "<p>Coșul tău este gol.</p>";
            }
        });
    </script>

</body>
</html>
